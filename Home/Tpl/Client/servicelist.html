<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>逸管家客服|<{$configcache['Title']}></title>
  <link rel="stylesheet" type="text/css" href="__CSS__/content.css"  />
  <link rel="stylesheet" type="text/css" href="__CSS__/public.css"  />
  <script type="text/javascript" src="__JS__/jquery.js"></script>
   <script type="text/javascript" src="__JS__/Public.js"></script>
<script src="__PUBLIC__/js/layer/layer.js" type="text/javascript"></script>
  <style type="text/css">
  .select{padding:5px 10px;border:#ddd 1px solid;border-radius:4px;width:60%;margin:5% auto;font-size:12px}
  .select li{list-style:none;padding:10px 0 5px 80px}
  .select .formli{list-style:none;padding:10px 0 5px 20px}
  .select .select-list{border-bottom:#eee 1px dashed}
  .select dl{zoom:1;position:relative;line-height:24px;}
  .select dl:after{content:" ";display:block;clear:both;height:0;overflow:hidden}
  .select dt{width:100px;margin-bottom:5px;position:absolute;top:0;left:-100px;text-align:right;color:#666;height:24px;line-height:24px}
  .select dd{float:left;display:inline;margin:0 0 5px 5px;}
  .select a{display:inline-block;white-space:nowrap;height:24px;padding:0 10px;text-decoration:none;color:#039;border-radius:2px;}
  .select a:hover{color:#f60;background-color:#f3edc2}
  .select .selected a{color:#fff;background-color:#f60}
  .select-result dt{font-weight:bold}
  .select-no{color:#999}
  .select .select-result a{padding-right:20px;background:#f60 url("__PUBLIC__/image/close.gif") right 9px no-repeat}
  .select .select-result a:hover{background-position:right -15px}
  .tc{text-align:center; text-indent:0;font-family:"微软雅黑";font-size: 14px;color:#111;}
  .butclass{
  	background:#d9d9d9;
  	height:40px;
  	width:120px;
  	margin:20px;
  	padding:10px;
  	border-radius:5px;
  }
  .notice{
  	background:#d9d9d9;
  	height:40px;
  	width:80px;
  	border-radius:5px;
  }

  td{
  	text-align:center;
  }
  th{
  	text-align:center;
  }
 
   a:link {color: #0000FF}     /* 未访问的链接 */
	a:visited {color: #d90a81}  /* 已访问的链接 */
	a:hover {color: #d90a81}    /* 当有鼠标悬停在链接上 */
	a:active {color: #d90a81}   /* 被选择的链接 */
  .sure{left:220px; top:10px; width:60px; height:28px; line-height:28px; border:none; background:#090; color:#fff; font-family:"微软雅黑"; cursor:pointer;}
   .tel{left:0; top:10px; width:220px; height:26px; line-height:26px; color:#555; font-family:"微软雅黑"; repeat-x left top; border:solid 1px #ccc;}
  </style>
  <script>
  function myBrowser(){
    var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串
    var isOpera = userAgent.indexOf("Opera") > -1;
    if (isOpera) {
      return "Opera"
    }; //判断是否Opera浏览器
    if (userAgent.indexOf("Firefox") > -1) {
      return "FF";
      /*firefox----这段js重新封装了event对象，经验证可以在火狐下支持！----*/
      function __firefox(){
        HTMLElement.prototype.__defineGetter__("runtimeStyle", __element_style);
        window.constructor.prototype.__defineGetter__("event", __window_event);
        Event.prototype.__defineGetter__("srcElement", __event_srcElement);
      }
      function __element_style(){
        return this.style;
      }
      function __window_event(){
        return __window_event_constructor();
      }
      function __event_srcElement(){
        return this.target;
      }
      function __window_event_constructor(){
        if(document.all){
          return window.event;
        }
        var _caller = __window_event_constructor.caller;
        while(_caller!=null){
          var _argument = _caller.arguments[0];
          if(_argument){
            var _temp = _argument.constructor;
            if(_temp.toString().indexOf("Event")!=-1){
              return _argument;
            }
          }
          _caller = _caller.caller;
        }
        return null;
      }
      if(window.addEventListener){
        __firefox();
      }
    } //判断是否Firefox浏览器
    if (userAgent.indexOf("Chrome") > -1){
      return "Chrome";
    }
    if (userAgent.indexOf("Safari") > -1) {
      return "Safari";
    } //判断是否Safari浏览器
    if (userAgent.indexOf("compatible") > -1 && userAgent.indexOf("MSIE") > -1 && !isOpera) {
      return "IE";
    }; //判断是否IE浏览器
  }
  </script>
</head>
<body>
  <div id="content">
   <h1>首页 > 逸管家 >客服管理</h1>
   <h2>
     <div class="h2_left">
       <a href="__ACTION__" class="whole">全部</a>
       <a href="javascript:;" class="f5" onclick="f5();">刷新</a>
       <a href="javascript:history.back();" class="Retreat">后退</a>
       <a href="javascript:history.go(1);" class="Advance">前进</a>
     </div>
    
      <input type="hidden" id="url" value="<{$url}>">

      
  </h2>
  
<div class="fen" style="margin-top:15px;">
    <ul class="select" style="height:80px;padding-top:50px;margin-top: 40px;margin-bottom: 20px;">
 
        <li class="formli">
  
	         <form method="post">
		        <div>
		          <input type="text" name="keywords" class="tel orderno"  placeholder="小贴士：请输入手机号" value="<{$keywords}>"/>&nbsp;&nbsp;&nbsp;&nbsp;
		            <input type="submit" class="sure" value="查询" /> 
		        </div>
	    	</form>
	
        </li>
       
	</ul>
  	</div>
  	
  	 
    
<div style="height:40px;width:100px;text-align:center;margin-left:93%;margin-right:15px;background-color:#d9d9d9">
	<button id="add" style="margin-top:8%;color:#0099ff;font-size:20px">+添加</button>
</div>
 
  <table id="table" border="1" bordercolor="#CCCCCC" cellpadding="0" cellspacing="0">
   <tr>

     <th width="20%">昵称</th>

     <th width="15%">手机号</th>  
     <th width="15%">真实姓名</th> 
     <th width="15%">添加时间</th> 
     <th width="15%">状态</th> 
     <th width="15%">操作</th>     
   </tr>
   <empty name="list">
   <tr><td style="text-align:center" colspan="6" class='tc'>当前请求无数据</td></tr>
    <else />
   <volist name="list" id="vo">
    <tr>
     <td style="text-align:center" class='tc'> <{$vo.userNickName}></td>
      <td style="text-align:center" class='tc'><{$vo.userTelephone}></td>
      <td style="text-align:center" class='tc'><{$vo.userRealName}></td>
      <td style="text-align:center" class='tc'><{$vo.updateTime}></td>
      <td style="text-align:center" class='tc'>
      	<switch name='vo.isUse'>
      		<case value='1'>启用</case>
      		<case value='0'>禁用</case>
      	</switch>
      </td>
      <td style="text-align:center" class='tc'>
      	<switch name='vo.isUse'>
      		<case value='1'><a href='#' style='margin:10px' data-sid='<{$vo.sid}>'  data-isuse='0' class='isStop'>禁用</a></case>
      		<case value='0'><a href='#' style='margin:10px' data-sid='<{$vo.sid}>' data-isuse='1' class='isStop'>启用</a></case>
      	</switch>
      	<a href='#' data-sid='<{$vo.sid}>' class='del'>删除</a>
      </td>
    </tr> 
  </volist>
  </empty>
</table>
<div id="page">
  <{$page}>   每页显示<select id="selectpagesize" style="width:50px;display:inline-block;">
        
 										<option ><{$pageSize}></option>
										<option value="10">10</option>
										<option value="5">5</option>
										<option value="15">15</option>
										<option value="20">20</option>
										<option value="30">30</option>
										<option value="40">40</option>
										<option value="50">50</option>
								</select>  条</div>

</div>

<script>

var url = "<{$Think.config.URL}>";
/**
 * 禁用
 */
$(".isStop").click(function(){
	var sid = $(this).data('sid');
	var isUse = $(this).data('isuse');
	$.ajax({
		type:"POST",
		url:url+'/manager/customer/update',
		data:{sid:sid,isUse:isUse},
		dataType:'json',
		cache:false,
		success:function(res){
			if(res.success){
				alert('操作成功');
				window.parent.frames['c'].location.reload();
			}else{
				alert(res.message);	
			}
		}
		
	})
})
/**
 * 删除客服
 */
$(".del").click(function(){
	var sid = $(this).data('sid');
	layer.open({
		type: 1,
		title: "<div style='text-align:center'><strong>提示</strong></div>",
		content:"<div style=''><div><div style='padding-top:20px;padding-bottom:20px;text-align:center;font-size:18px'>确认要删除？删除后不可恢复!</div></div><div style='text-align:center;border-bottom:1px solid white;'><div style='margin-top:6%;margin-left:10px;'><button style='color:blue' class='notice delok'>确定</button><button style='margin-left:15%' class='notice layerclose'>取消</button></div></div></div>",
		skin: 'layer-ext-moon',
		area: ['22%','26%'],
		resize: false,
		shadeClose: true,
		success:function(){
			$(".delok").click(function(){
				$.ajax({
					type:"POST",
					url:url+'/manager/customer/delete',
					data:{ids:sid},
					dataType:"json",
					cache:false,
					success:function(res){
						if(res.success){
							alert('删除成功');
							window.parent.frames['c'].location.reload();
						}else{
							alert(res.message);	
						}
					}
				})
			});
			$(".layerclose").click(function(){
				layer.closeAll();
			})
		}
		});
})
/**
 * 关闭弹出框
 */

/**
 * @author zyl																	
 *添加客服
 */
$("#add").click(function(){
	layer.open({
		type: 1,
		title: "<div style='text-align:center'><strong>新增客服账号</strong></div>",
		content:"<div><div style='height:200px;border:1px solid #d9d9d9'><div style='margin-left:60px;margin-top:80px'><label>手机号：</label><input id='layerTelphone' class='tel' type='text' /></div></div><div style='padding-left:30%;border-bottom:1px solid white'><button id='saveadd' class='butclass'>提交</button></div></div>",
		skin: 'layer-ext-moon',
		area: ['60%','70%'],
		resize: false,
		shadeClose: true,
		success:function(){
			$("#saveadd").click(function(){
				var userTelephone = $("#layerTelphone").val();
				$.ajax({
					type:"POST",
					url:url+'/manager/customer/saveCustomer',
					data:{userTelephone:userTelephone},
					dataType:"json",
					cache:false,
					success:function(res){
						if(res.success){
							alert('添加成功');
							window.parent.frames['c'].location.reload();
						}else{
							alert(res.message);	
						}
					}
				})
			})
		}
		});
})

	
$("#selectpagesize").on('change',function(){
    var pageSize=$(this).val();
    window.location.href = "__APP__/Client/servicelist?pageSize="+pageSize;
});

</script>
</body>
</html>
